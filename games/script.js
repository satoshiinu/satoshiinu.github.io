function _0x2087(_0x55024d,_0x535c54){var _0x485417=_0x4854();return _0x2087=function(_0x208713,_0x28c248){_0x208713=_0x208713-0x162;var _0x41610c=_0x485417[_0x208713];return _0x41610c;},_0x2087(_0x55024d,_0x535c54);}var _0x3bd81b=_0x2087;(function(_0x236711,_0x4e394d){var _0x21d986=_0x2087,_0x52e488=_0x236711();while(!![]){try{var _0x7fd381=-parseInt(_0x21d986(0x163))/0x1+parseInt(_0x21d986(0x165))/0x2+-parseInt(_0x21d986(0x181))/0x3+parseInt(_0x21d986(0x18e))/0x4*(-parseInt(_0x21d986(0x16b))/0x5)+parseInt(_0x21d986(0x194))/0x6*(-parseInt(_0x21d986(0x195))/0x7)+parseInt(_0x21d986(0x173))/0x8*(-parseInt(_0x21d986(0x171))/0x9)+-parseInt(_0x21d986(0x16e))/0xa*(-parseInt(_0x21d986(0x177))/0xb);if(_0x7fd381===_0x4e394d)break;else _0x52e488['push'](_0x52e488['shift']());}catch(_0x11fd07){_0x52e488['push'](_0x52e488['shift']());}}}(_0x4854,0x5d5b7));var DoSayErrorMassege=!![];window[_0x3bd81b(0x19e)]=(_0x1dffe8,_0x59399b,_0x5a3112,_0x423a23,_0x5c921e)=>{var _0x11ba29=_0x3bd81b;if(DoSayErrorMassege)alert(_0x11ba29(0x178));};const zoom=0x4;var timer=0x0,player=new Object();player['x']=0x19*0x10,player['y']=0x19*0x10,player[_0x3bd81b(0x184)]=0x0,player[_0x3bd81b(0x19b)]=0x0,player[_0x3bd81b(0x176)]=player['x']+0xa0,player[_0x3bd81b(0x16f)]=player['y']+0x18,player['scroll_offsetx']=0x0,player[_0x3bd81b(0x17a)]=0x0,player[_0x3bd81b(0x196)]=undefined,player[_0x3bd81b(0x16a)]=0x0,player[_0x3bd81b(0x193)]=0x0,player['canRotate']=!![];var map=new Object();readMapData(_0x3bd81b(0x172),_0x3bd81b(0x189));var key=new Object();key['up']=![],key[_0x3bd81b(0x19d)]=![],key[_0x3bd81b(0x17e)]=![],key['left']=![];var img=new Object();img[_0x3bd81b(0x169)]=new Image(),img[_0x3bd81b(0x169)][_0x3bd81b(0x17f)]='img/tiles.png',img['players']=new Image(),img['players'][_0x3bd81b(0x17f)]=_0x3bd81b(0x18b);var tile_image_list=[img[_0x3bd81b(0x19a)],img[_0x3bd81b(0x197)],img[_0x3bd81b(0x188)]],tile_collision=[![],!![],![],!![]];const tileAtlas=[0x0,0x1,0x2,0x3,0x4,0x5,0x6],playerAtlas=[0x0,0x1,0x2],canvas=document[_0x3bd81b(0x174)](_0x3bd81b(0x170)),ctx=canvas[_0x3bd81b(0x192)]('2d');canvas[_0x3bd81b(0x17c)]=0x140*zoom,canvas['height']=0xb4*zoom,ctx[_0x3bd81b(0x199)]=![],ctx[_0x3bd81b(0x168)]=![],ctx[_0x3bd81b(0x180)]=![],ctx[_0x3bd81b(0x17b)]=![];function main(){var _0xb3d0f5=_0x3bd81b;ctx['clearRect'](0x0,0x0,0x500*zoom,0x2d0*zoom),addEventListener(_0xb3d0f5(0x187),keyupfunc,![]),addEventListener(_0xb3d0f5(0x175),keydownfunc,![]);player['xspd']>0x0?player[_0xb3d0f5(0x184)]=Math[_0xb3d0f5(0x18d)](player[_0xb3d0f5(0x184)]*0.85*0x3e8)/0x3e8:player['xspd']=Math[_0xb3d0f5(0x166)](player[_0xb3d0f5(0x184)]*0.85*0x3e8)/0x3e8;player[_0xb3d0f5(0x19b)]>0x0?player['yspd']=Math[_0xb3d0f5(0x18d)](player['yspd']*0.85*0x3e8)/0x3e8:player['yspd']=Math['ceil'](player['yspd']*0.85*0x3e8)/0x3e8;if(key['up'])player[_0xb3d0f5(0x19b)]-=0.5;if(key[_0xb3d0f5(0x19d)])player[_0xb3d0f5(0x19b)]+=0.5;if(key[_0xb3d0f5(0x17e)])player[_0xb3d0f5(0x184)]+=0.5;if(key['left'])player['xspd']-=0.5;player_move(player['xspd'],player[_0xb3d0f5(0x19b)],!![]);if(player[_0xb3d0f5(0x18c)])rotate();player[_0xb3d0f5(0x176)]=player['x']-0xa0+player[_0xb3d0f5(0x16d)],player[_0xb3d0f5(0x16f)]=player['y']-0x50+player[_0xb3d0f5(0x17a)];for(var _0x1a2477=0x0;_0x1a2477<0xd;_0x1a2477++){for(var _0x2140a5=0x0;_0x2140a5<0x15;_0x2140a5++){try{var _0x1c725b=map['map'][_0xb3d0f5(0x162)][_0x1a2477+Math[_0xb3d0f5(0x18d)](player[_0xb3d0f5(0x16f)]/0x10)][_0x2140a5+Math[_0xb3d0f5(0x18d)](player[_0xb3d0f5(0x176)]/0x10)];ctx[_0xb3d0f5(0x186)](img[_0xb3d0f5(0x169)],getTileAtlasXY(_0x1c725b,0x0),getTileAtlasXY(_0x1c725b,0x1),0x10,0x10,(_0x2140a5*0x10+(0x10-player['scrollx']%0x10)-0x10)*zoom,(_0x1a2477*0x10+(0x10-player[_0xb3d0f5(0x16f)]%0x10)-0x10)*zoom,0x10*zoom,0x10*zoom);}catch{}}}if(Math['abs'](player['xspd'])+Math[_0xb3d0f5(0x191)](player[_0xb3d0f5(0x19b)])<0x3)player[_0xb3d0f5(0x16a)]=0x2;else{if(timer%0x32>0x0)player[_0xb3d0f5(0x16a)]=0x0;if(timer%0x32>12.5)player['anim']=0x2;if(timer%0x32>0x19)player['anim']=0x1;if(timer%0x32>37.5)player[_0xb3d0f5(0x16a)]=0x2;}ctx[_0xb3d0f5(0x186)](img[_0xb3d0f5(0x179)],player[_0xb3d0f5(0x16a)]*0x10,player[_0xb3d0f5(0x193)]*0x20,0x10,0x18,(player['x']-player[_0xb3d0f5(0x176)])*zoom,(player['y']-player[_0xb3d0f5(0x16f)]-0x8)*zoom,0x10*zoom,0x18*zoom);for(var _0x1a2477=0x0;_0x1a2477<0xd;_0x1a2477++){for(var _0x2140a5=0x0;_0x2140a5<0x15;_0x2140a5++){try{var _0x1c725b=map[_0xb3d0f5(0x189)]['map2'][_0x1a2477+Math['floor'](player[_0xb3d0f5(0x16f)]/0x10)][_0x2140a5+Math[_0xb3d0f5(0x18d)](player['scrollx']/0x10)];ctx[_0xb3d0f5(0x186)](img[_0xb3d0f5(0x169)],getTileAtlasXY(_0x1c725b,0x0),getTileAtlasXY(_0x1c725b,0x1),0x10,0x10,(_0x2140a5*0x10+(0x10-player[_0xb3d0f5(0x176)]%0x10)-0x10)*zoom,(_0x1a2477*0x10+(0x10-player[_0xb3d0f5(0x16f)]%0x10)-0x10)*zoom,0x10*zoom,0x10*zoom);}catch{}}}timer++,requestAnimationFrame(main);}requestAnimationFrame(main);function keydownfunc(_0x5a6093){var _0x15d45d=_0x3bd81b,_0x18016d=_0x5a6093[_0x15d45d(0x183)];if(_0x18016d==0x25)key[_0x15d45d(0x19c)]=!![];if(_0x18016d==0x26)key['up']=!![];if(_0x18016d==0x27)key[_0x15d45d(0x17e)]=!![];if(_0x18016d==0x28)key[_0x15d45d(0x19d)]=!![];_0x5a6093[_0x15d45d(0x190)]();}function keyupfunc(_0x4bd5cc){var _0x3ecbbd=_0x3bd81b,_0x5d0c04=_0x4bd5cc[_0x3ecbbd(0x183)];if(_0x5d0c04==0x25)key[_0x3ecbbd(0x19c)]=![];if(_0x5d0c04==0x26)key['up']=![];if(_0x5d0c04==0x27)key[_0x3ecbbd(0x17e)]=![];if(_0x5d0c04==0x28)key[_0x3ecbbd(0x19d)]=![];}function player_move(_0x2329a6,_0x1fc4af,_0x5d702d){var _0x52d05e=_0x3bd81b;for(var _0x1c8370=0x0;_0x1c8370<Math[_0x52d05e(0x18f)](Math[_0x52d05e(0x191)](_0x2329a6));_0x1c8370++){player['x']+=Math[_0x52d05e(0x167)](_0x2329a6);if(hitbox(player['x'],player['y'])&&_0x5d702d)player['x']-=Math[_0x52d05e(0x167)](_0x2329a6);}for(var _0x1c8370=0x0;_0x1c8370<Math['round'](Math['abs'](_0x1fc4af));_0x1c8370++){player['y']+=Math[_0x52d05e(0x167)](_0x1fc4af);if(hitbox(player['x'],player['y'])&&_0x5d702d)player['y']-=Math[_0x52d05e(0x167)](_0x1fc4af);}}function hitbox(_0x355c5e,_0x1cb86b){var _0x3a5c3a=_0x3bd81b;if(map[_0x3a5c3a(0x189)][_0x3a5c3a(0x198)][Math['floor'](_0x1cb86b/0x10+0x0)][Math[_0x3a5c3a(0x18d)](_0x355c5e/0x10+0x0)])return!![];if(map[_0x3a5c3a(0x189)]['hitbox'][Math['floor'](_0x1cb86b/0x10+0x0)][Math[_0x3a5c3a(0x18d)](_0x355c5e/0x10+0.95)])return!![];if(map[_0x3a5c3a(0x189)][_0x3a5c3a(0x198)][Math['floor'](_0x1cb86b/0x10+0.95)][Math[_0x3a5c3a(0x18d)](_0x355c5e/0x10+0x0)])return!![];if(map['map'][_0x3a5c3a(0x198)][Math[_0x3a5c3a(0x18d)](_0x1cb86b/0x10+0.95)][Math[_0x3a5c3a(0x18d)](_0x355c5e/0x10+0.95)])return!![];}function rotate(){var _0x3a353b=_0x3bd81b;if(key['up']&&!key['down']&&!key[_0x3a353b(0x17e)]&&!key[_0x3a353b(0x19c)])player[_0x3a353b(0x193)]=0x2;if(!key['up']&&key[_0x3a353b(0x19d)]&&!key['right']&&!key[_0x3a353b(0x19c)])player[_0x3a353b(0x193)]=0x0;if(!key['up']&&!key[_0x3a353b(0x19d)]&&key['right']&&!key[_0x3a353b(0x19c)])player[_0x3a353b(0x193)]=0x3;if(!key['up']&&!key['down']&&!key['right']&&key[_0x3a353b(0x19c)])player[_0x3a353b(0x193)]=0x1;if(key['up']&&!key[_0x3a353b(0x19d)]&&key['right']&&!key[_0x3a353b(0x19c)])player['rotate']=0x3;if(key['up']&&!key['down']&&!key[_0x3a353b(0x17e)]&&key['left'])player[_0x3a353b(0x193)]=0x1;if(!key['up']&&key[_0x3a353b(0x19d)]&&key[_0x3a353b(0x17e)]&&!key[_0x3a353b(0x19c)])player[_0x3a353b(0x193)]=0x3;if(!key['up']&&key[_0x3a353b(0x19d)]&&!key['right']&&key[_0x3a353b(0x19c)])player['rotate']=0x1;if(!key['up']&&!key['down']&&key['right']&&key[_0x3a353b(0x19c)])player[_0x3a353b(0x193)]=0x0;if(key['up']&&key[_0x3a353b(0x19d)]&&!key[_0x3a353b(0x17e)]&&!key[_0x3a353b(0x19c)])player[_0x3a353b(0x193)]=0x0;if(key['up']&&!key[_0x3a353b(0x19d)]&&key['right']&&key['left'])player[_0x3a353b(0x193)]=0x2;if(!key['up']&&key[_0x3a353b(0x19d)]&&key[_0x3a353b(0x17e)]&&key['left'])player[_0x3a353b(0x193)]=0x0;if(key['up']&&key['down']&&key[_0x3a353b(0x17e)]&&!key[_0x3a353b(0x19c)])player['rotate']=0x3;if(key['up']&&key[_0x3a353b(0x19d)]&&!key[_0x3a353b(0x17e)]&&key[_0x3a353b(0x19c)])player[_0x3a353b(0x193)]=0x1;if(key['up']&&key[_0x3a353b(0x19d)]&&key[_0x3a353b(0x17e)]&&key[_0x3a353b(0x19c)])player['rotate']=0x0;}function getTileAtlasXY(_0x4caec4,_0x105a15){var _0xeb4fc0=_0x3bd81b;if(_0x105a15==0x0)return _0x4caec4%0x10*0x10;if(_0x105a15==0x1)return Math[_0xeb4fc0(0x18d)](_0x4caec4/0x10)*0x10;}function getPlayerAtlasXY(_0x42da12,_0x50f47e){return playerAtlas[_0x42da12]*0x10;}function hexColour(_0x3f2fe7){var _0x568bea=_0x3bd81b;if(_0x3f2fe7<0x100)return Math[_0x568bea(0x191)](_0x3f2fe7)[_0x568bea(0x164)](0x10);return 0x0;}function decColour(_0x43d3cf){var _0x440759=_0x3bd81b;if(_0x43d3cf<0x100)return Math['abs'](_0x43d3cf)[_0x440759(0x164)](0xa);return 0x0;}function btnUpDown(){key['up']=!![];}function _0x4854(){var _0x52447d=['86514wWHeUe','133WRwleD','image','tile','hitbox','mozImageSmoothingEnabled','empty','yspd','left','down','onerror','map1','639464filtQh','toString','91310YAkpdT','ceil','sign','webkitImageSmoothingEnabled','tiles','anim','5wyVgUI','then','scroll_offsetx','10qzAAdm','scrolly','canvas','1027053hcOJOQ','Map.json','24vMhSvU','getElementById','keydown','scrollx','25294445scuQsk','エラーが発生しました\x0a再読み込みしてください','players','scroll_offsety','imageSmoothingEnabled','width','log','right','src','msImageSmoothingEnabled','625314sYfhae','json','keyCode','xspd','indexOf','drawImage','keyup','tile2','map','ファイルパスが不正です','img/players.png','canRotate','floor','1994180ZOXIui','round','preventDefault','abs','getContext','rotate'];_0x4854=function(){return _0x52447d;};return _0x4854();}function btnUpUp(){key['up']=![];}function btnDownDown(){var _0x3d312f=_0x3bd81b;key[_0x3d312f(0x19d)]=!![];}function btnDownUp(){key['down']=![];}function btnLeftDown(){var _0x43f221=_0x3bd81b;key[_0x43f221(0x19c)]=!![];}function btnLeftUp(){key['left']=![];}function btnRightDown(){var _0x20540e=_0x3bd81b;key[_0x20540e(0x17e)]=!![];}function btnRightUp(){var _0x3e5fa6=_0x3bd81b;key[_0x3e5fa6(0x17e)]=![];}function setMapData(_0xd069a0,_0x4613d6){var _0x35d06d=_0x3bd81b;map[_0x35d06d(0x189)]=_0xd069a0,console[_0x35d06d(0x17d)](map[_0x35d06d(0x189)]);}function readMapData(_0x5ba3ae,_0x2846ac){var _0x548856=_0x3bd81b,_0xa76adc=[];if(_0x5ba3ae[_0x548856(0x185)](';')==-0x1)try{fetch(_0x5ba3ae)['then'](_0x47f203=>_0x47f203[_0x548856(0x182)]())[_0x548856(0x16c)](_0x28e559=>setMapData(_0x28e559,_0x2846ac));}catch{alert('no');}else alert(_0x548856(0x18a));}